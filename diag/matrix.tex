% A matrix of pendulum images representing the various stages in the motion of a simple pendulum

\tikzsetnextfilename{matrix}
\begin{center}
   \begin{tikzpicture}

       \usetikzlibrary{patterns}
    %    \usetikzlibrary{positioning}
       % We define a tikz style which defines a fill pattern consisting of lines in the north east direction.
       % The draw=none option indicates that we do NOT want any stroke/border around the fill
       \tikzstyle{wall}=[fill,pattern=north east lines,minimum width=0.75cm,minimum height=0.3cm, draw=none]

       % Define dimensions and angles
       \def\r{2.5}
       \def\hw{0.25}     % Half width of the small wall segment on top
       \def\br{0.1}      % Radius of bob
       \def\ar{0.75}      % Radius of the arc that represents the angle

       \newcommand{\pendulum}[3]{
            % #1: Angle of pendulum string from x-axis
            % #2: Length of velocity vector (in cm). Negative values will cause vectors to point from RTL
            % #3: Image caption (displayed at bottom)

            \def\angle{#1}

           % Define coordinates used in the diagram
           \coordinate (bc) at (\angle:\r+\br);          % Center of the bob

           % Draw commands
           \draw (-\hw, 0) -- (\hw, 0);
           \draw [wall] (-\hw,0) rectangle (\hw,0.1);        % Draws a rectangle using the 'wall' pattern giving us the sloped lines

           \draw (0,0) -- (\angle:\r);       % string
           \draw [dashed] (0,0) -- (0,-\r);  % Dashed line down the middle

           \draw (bc) circle [radius=\br];        % The small circle representing the bo

           % We branch based on the value of #2 (the length of the v vector passed in)
           % If #2 == 0cm then we do NOT draw the velocity vector
           % To test #2 we use \ifthenelse where the first argument is the condition, the second is executed on truth and the third on false
           % We use \lengthtest to compare possibly floating point values. Note the explicit 'cm' added after #2 to cast it as a length and not a number.
            \ifthenelse{\lengthtest{#2 cm = 0cm}}{}{

                \draw [->] (bc) -- ++ (\angle+90:#2);       % The velocity vector is tangential to the string so we rotate the angle by 90 degrees by adding 90 to the angle
            }

           \node [align=center, text width=4cm] at (-90:{\r + 1}) {#3};
       }

       \matrix
       {
            \pendulum{-120}{0}{At amplitude speed is zero.} & \pendulum{-105}{0.3}{Speed increasing} & \pendulum{-90}{0.5}{At equilibrium speed is maximum} & \pendulum{-75}{0.3}{Speed decreasing}\\
       };

   \end{tikzpicture}
\end{center}
