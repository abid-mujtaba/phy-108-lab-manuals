\tikzsetnextfilename{setup}

% Define the height of the cylinder. We define it outside because this is also used by the flask
\def\Ch{5}

% Define the cylinder as an embeddable drawing
\newdrawing{\cylinder}{

      \def\hw{0.5}      % Half width of cylinder
      \def\h{\Ch}         % Height of Cylinder
      \def\uw{0.2}      % Width of top-edge of cylinder

      \draw                         % Cylinder
         (-\hw,0) -- (-\hw,\h)
         (\hw,0) -- (\hw,\h)
         (-\hw,0) -- (\hw,0)

         (-\hw,\h) -- (-\hw-\uw,\h)
         (\hw,\h) -- (\hw + \uw,\h)
      ;
}

% Define the conical flask
\newdrawing{\flask}{

   \def\chw{0.1}       % Half-width of lower column
   \def\ch{0.75}           % Height of lower column

   \def\thw{0.8}        % Half-width of the top of the slanting bit
   \def\th{0.5}         % Height of the top of the slanting bit

   \coordinate (ol) at (-\chw, 0);
   \coordinate (or) at (\chw, 0);


   % We will place the origin horizontally center and vertically where the slanting part meets the lower column
   \draw
      (ol) -- (-\chw, -\ch)
      (or) -- (\chw, -\ch)

      (ol) -- (-\thw, \th)
      (or) -- (\thw, \th)
   ;
}


\begin{center}
   \begin{tikzpicture}

      \cylinder
      \flask[yshift=\Ch-0.1]    % Place flask with its anchor (origin) just below the top of the cylinder

      \def\ar{1}                % Draw the miniscus of the glycerin
      % To draw an arc with center (0, \Ch), radius \ar and starting and ending angles -60 to -120 we use the 'shift' option.
      % The arc command uses a starting point and then angles and radius and NOT the center
      % To overcome this we define the starting point as the center shifted to the starting point using polar coordinates. The ability to shift using polar coordinates is very useful here.
      % So [shift=(-60:\ar)] applied to the coordinates of the center gives the starting position.
      % The second part containing the start and end angles and the radius of the arc are straight-forward
      \draw ([shift=(-60:\ar)] 0,\Ch) arc (-60:-120:\ar);
      
      \def\sr{0.05}
      \draw (0,2.5) circle [radius=\sr];       % The falling sphere
      \draw [->] (0,2.5-\sr) -- (0,2.2);

   \end{tikzpicture}
\end{center}
